# 操作系统的启动

```
        
        CPU
         |
    ------------------------------------------ 总线
        |                           |
      I/O, timer/Dist, etc         内存   

```

DISK: 存放OS

Bootloader: 加载OS, 放在硬盘的第一个主引导扇区(512字节)

BIOS: 基本I/O处理系统

BIOS会从某个特定内存地址开始执行, 以X86为例的地址为CS:IP = 0xf000:fff0 (CS: 段寄存器; IP: 指令寄存器 ), 完成接下来的一系列工作, 如POST(加电自检)，寻找显卡等外设检查。
当没有问题后，BIOS会负责把硬盘上的 bootloader 放到内存中去。然后 bootloader 再负责加载OS。

**以x86为例**:

BIOS:

1 BIOS将 Bootloader 从磁盘的引导扇区(512字节)加载到0x7c00

2 跳转到 CS:IP = 0000:7c00

Bootloader:

1 将OS的代码和数据从硬盘加载到内存中

2 跳转到OS的起始地址


```
            计算机内存
          ______________                                                            ___________________                                                                                                                           
   4GB    |             |                 ------------------------                  |                  |                            
          |             |    ---------->  |   bootloader  | OS    |--               |   Free space     |                                         
          | Free space  |   |             |                       |  |              |                  |                                
          |             |   |             |                       |  |              |------------------|                                    
          |             |   |             |          DISK         |  -------------->|         OS       |                                               
          |             |   |             |                       |                 |                  |                                  
          |-------------|   |              -----------------------                  |------------------|                      
          |             |   |                                                       |                  |                          
          |  BIOS ROM   |   |                                                       |      BIOS ROM    |                                                                                                               
          |-------------|   |                                                       |------------------|                                    
          |             |   |                                                       |                  |        
          | Free space  |   |                                                       |     Free space   |                  
          |-------------|   |                                                       |------------------|                                                 
          |             |   |                                                       |                  |                        
          | bootloader  | --                                                        |    bootloader    |                                 
   0x7c00 |-------------|                                                           |------------------|                                                  
          |             |                                                           |                  |                     
          | BIOS DATA   |                                                           |    BIOS   DATA   |                              
          |             |                                                           |                  |                     
   0x0000 |_____________|                                                           |__________________|                                                    
                                                                                                                         
```
