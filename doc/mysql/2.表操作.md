# sql学习笔记

## 1.建表

```

CREATE TABLE 表名(
    列名1 数据类型 列级约束 NULL值 DEFAULT 值,
    列名1 数据类型 列级约束 NULL值,
    ...
);

```

### 1.1 数据类型:

### 1.2 列级约束:

1 `PRIMARY KEY`: 主关键字约束

2 `UNIQUE`: 唯一性约束

3 `FOREIGN KEY REFERENCE`: 外部关键字约束, 用来说明表之间的参照关系

`ON DELETE/UPDATE {NO ACTION|CASCADE|SET NULL|SET DEFAULT}`:

NO ACTION: 禁止删除或更新被参照记录

CASCADE: 进行级联处理

SET NULL： 将参照记录的对应字段设置为空值

SET DEFAULT: 将参照记录的对应字段设置为默认值

4 `CHECK`: 域完整性约束, 用来说明该列的取值范围, 如`sex INT(1) CHECK (sex = 0 OR sex = 1);`, 如`status CHAR(4) (status IN '正常', '失败'');`

### 1.3 NULL:

+ 只有 NOT NULL 列可作为主键

+ 不写默认为 NULL

### 1.4 DEFAULT:

+ 插入时不给出值则采用默认值

## 2.更新表

```

ALTER TABLE 表名
ADD 列名 列定义...；

```

## 3.删除表

```

DROP TABLE 表名;

```

## 二.表之间的约束

### 2.1 Identifying relationship 和non-Identifying relationship

1 识别关系: 子表中的行的存在取决于父表中的行

2 非识别关系: 父级的主键属性不能成为子级的主键属性

**解释:**

一本书属于所有者，所有者可以拥有多本书。 但是，这本书也可以存在，没有所有者，所有权可以从一个所有者改变为另一个。 书与所有者之间的关系是一种非识别的关系。

然而，一本书是由作者撰写的，作者可以编写多本书。 但是，这本书需要由作者撰写 - 如果没有作者，它就不可能存在。 因此，书与作者之间的关系是一种识别关系。

## 3 清空某个mysql表中所有内容

1 delete from 表名;

2 truncate table 表名;

不带where参数的delete语句可以删除mysql表中所有内容，使用truncate table也可以清空mysql表中所有内容。效率上truncate比delete快，但truncate删除后不记录mysql日志，不可以恢复数据。

delete的效果有点像将mysql表中所有记录一条一条删除到删完，而truncate相当于保留mysql表的结构，重新创建了这个表，所有的状态都相当于新表。

## 4 mysql 设置远程连接，授权

```

// 关掉绑定接口: /etc/mysql/my.cnf
# bind-address = 127.0.0.1

// 授权
mysql>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'youpassword' WITH GRANT OPTION;

// 重载授权表：
FLUSH PRIVILEGES;
```


