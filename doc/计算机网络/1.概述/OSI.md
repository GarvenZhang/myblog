# OSI参考模型

利用分层思想，在网络出错时可快速为网络排障，从下到上每层都为上一层服务

---

## 一.应用层

所有能产生网络流量的程序

## 二.表示层

在传输之前是否进行 加密 或 压缩处理(二进制/ASCII)

## 三.会话层

查木马 `netstat -n`

## 四.传输层

可靠传输、不可靠传输、流量控制

## 五.网络层

负责选择最佳路径、规划IP地址

## 六.数据链路层

帧的开始和结束、实现透明传输、差错校验

## 七.物理层

定义接口标准、电器标砖、如何在物理链路上传输更快的速度

---

## 八.OSI参考模型对网络排错指导

从下到上：

1. 物理层故障: 查看链接状态、发送和接收的数据包(当发送很多但接收为0，可能是水晶头或网线故障)

2. 数据链路层故障: MAC冲突(同一局域网内有可能有两台电脑用的相同的MAC地址)、ADSL欠费会被运营商关闭数据链路、发送方和接收方网速协商不一致(带宽被强制，不自动协商)、计算机连接到错误的VLAN

3. 网络层故障: 配置错误IP地址/子网掩码/网关、路由器没有配置到达目标地址的路由

4. 应用层故障: 应用程序配置错误(如浏览器配置了错误代理)

---

## 九.OSI参考模型与网络安全

1. 物理层安全: 当网线被陌生人连接时，应从路由器拔掉

2. 数据链路层安全: ADSL拨号时账号密码安全、无线密码安全、VLAN安全、交换机端口绑定MAC地址安全

3. 网络层安全: 在路由器上使用ACL控制数据包流量、网络防火墙

4. 应用层安全: 开发的应用程序漏洞

---

## 十.TCP/IP协议和OSI参考模型

```

OSI参考模型          TCP/IP协议栈                                  《计算机网络》五层协议
                   
应用层                
表示层             HTTP FTP DNS ..                                     应用层
会话层             

传输层             TCP         UDP                                     传输层

网络层            ARP      IP      TCMP TGMP                           网络层


数据链路层       Ethernet    ATM     Frame Relay                       数据链路层
物理层                                                                 物理层

```

## 十一.数据封装

```

应用层                 
表示层                    上层数据
会话层                         
                            |
                            v    

传输层                TCP头 | 上层数据  -> 数据段/消息     
                            
                            |
                            v
                            
网络层                IP头 | TCP + 上层数据  -> 数据包

                            |
                            v 

数据链路层            MAC头 | IP + TCP + 上层数据 | FCS(用于差错校验的校验和) -> 数据帧

                            |
                            v

物理层                 010111010101111000110  -> 二进制

```

### 解封

封装的逆过程，从下到上层层去掉没用的头
